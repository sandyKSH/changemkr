<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìµœë§¤ì‹­ì´ì˜ í•˜ë£¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Apple SD Gothic Neo', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
        }

        .header {
            background: linear-gradient(45deg, #4a90e2, #357abd);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="rgba(255,255,255,0.1)"/></svg>') repeat;
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(-50px, -50px) rotate(360deg); }
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 8px;
            position: relative;
            z-index: 2;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
            position: relative;
            z-index: 2;
        }

        .screen {
            padding: 20px;
            min-height: calc(100vh - 120px);
            display: none;
            animation: slideIn 0.3s ease-out;
        }

        .screen.active {
            display: block;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .story-text {
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 20px;
            color: #333;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #4a90e2;
        }

        .time-badge {
            display: inline-block;
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .choice-container {
            margin-top: 20px;
        }

        .choice-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            text-align: center;
        }

        .choice-btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin-bottom: 10px;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 14px;
            color: #333;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            line-height: 1.4;
        }

        .choice-btn:hover {
            border-color: #4a90e2;
            background: #f8f9ff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.2);
        }

        .major-select {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .major-btn {
            padding: 15px 10px;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 13px;
            color: #333;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .major-btn:hover {
            border-color: #4a90e2;
            background: #f8f9ff;
            transform: scale(1.05);
        }

        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, #4a90e2, #357abd);
            transition: width 0.3s ease;
            z-index: 1000;
        }

        .character-img {
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, #4a90e2, #357abd);
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            color: white;
            transition: all 0.3s ease;
        }

        .character-img.happy {
            background: linear-gradient(45deg, #51cf66, #69db7c);
            animation: bounce 0.6s ease-in-out;
        }

        .character-img.sad {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            animation: shake 0.6s ease-in-out;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        .feedback {
            background: linear-gradient(45deg, #51cf66, #69db7c);
            color: white;
            padding: 15px;
            border-radius: 12px;
            margin: 15px 0;
            font-size: 14px;
            line-height: 1.5;
        }

        .feedback.incorrect {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
        }

        .summary-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-left: 4px solid #4a90e2;
        }

        .summary-title {
            font-weight: bold;
            color: #4a90e2;
            margin-bottom: 8px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #4a90e2, #357abd);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 144, 226, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #51cf66, #69db7c);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 10px;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(81, 207, 102, 0.4);
        }

        .share-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            text-align: center;
        }

        .badge {
            display: inline-block;
            background: linear-gradient(45deg, #ffd93d, #ff6b6b);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            margin: 10px 0;
        }

        .motivation-badge {
            display: inline-block;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: bold;
            margin: 15px 0;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .guide-card {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 12px;
            padding: 15px;
            margin: 10px 0;
            font-size: 14px;
            line-height: 1.5;
        }

        .emoji {
            font-size: 20px;
            margin-right: 8px;
        }

        /* í”¼ë“œë°± ëª¨ë‹¬ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            animation: modalFadeIn 0.3s ease-out;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            margin: 20px;
            max-width: 350px;
            text-align: center;
            animation: modalSlideIn 0.3s ease-out;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-30px) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-character {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 25px;
            color: white;
        }

        .modal-character.correct {
            background: linear-gradient(45deg, #51cf66, #69db7c);
        }

        .modal-character.incorrect {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
        }

        .modal-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }

        .modal-feedback {
            font-size: 14px;
            line-height: 1.6;
            color: #666;
            margin-bottom: 20px;
        }

        .modal-btn {
            background: linear-gradient(45deg, #4a90e2, #357abd);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 144, 226, 0.4);
        }

        .retry-btn {
            background: linear-gradient(45deg, #ffa726, #ff9800);
            margin-right: 10px;
        }

        .retry-btn:hover {
            box-shadow: 0 5px 15px rgba(255, 167, 38, 0.4);
        }

        /* ê²°ê³¼ ê³µìœ  ì¹´ë“œ */
        .result-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 20px;
            margin: 20px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .result-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="1" fill="rgba(255,255,255,0.1)"/></svg>') repeat;
            animation: float 15s infinite linear;
        }

        .result-type {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
        }

        .result-description {
            font-size: 14px;
            line-height: 1.5;
            opacity: 0.9;
            position: relative;
            z-index: 2;
        }

        .share-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .share-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 15px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .share-btn.twitter {
            background: #1da1f2;
            color: white;
        }

        .share-btn.kakao {
            background: #fee500;
            color: #3c1e1e;
        }

        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body>
    <div class="progress-bar" id="progressBar"></div>
    
    <div class="container">
        <div class="header">
            <h1>ğŸŒŸ ë§¤ì‹­ì´ì˜ í•˜ë£¨</h1>
            <p>ë„ˆë¼ë©´ ì–´ë–»ê²Œ í–‰ë™í• ë˜?</p>
        </div>

        <!-- ì‹œì‘ í™”ë©´ -->
        <div class="screen active" id="start">
            <div class="character-img">ğŸ‘¨â€ğŸ“</div>
            <div class="story-text">
                ì•ˆë…•! ë‚˜ëŠ” ë§¤ì‹­ì´ì•¼. ì‹œê°ì¥ì• ê°€ ìˆëŠ” ëŒ€í•™ìƒì´ì§€.<br><br>
                ì˜¤ëŠ˜ë„ í•™êµì— ê°„ë‹¤. ë‚˜ì—ê² ì•ˆë‚´ê²¬ 'ë³´ë¦¬'ê°€ ìˆê³ , ìŠ¤í¬ë¦°ë¦¬ë”ì™€ í•œì†Œë„¤ê°€ ìˆì–´. 
                ê·¸ë¦¬ê³ ... ê°€ë” ê·€ì°®ì€ ëˆˆì¹˜ë“¤ë„ ìˆì§€ë§Œ ë§ì´ì•¼.<br><br>
                <strong>ë„ˆë„ ë‚˜ì™€ í•¨ê»˜ í•˜ë£¨ë¥¼ ë³´ë‚´ë³¼ë˜?</strong>
            </div>

            <!-- ìƒˆë¡œìš´ ë™ê¸°ë¶€ì—¬ ì„¹ì…˜ -->
            <div style="text-align: center; margin: 20px 0;">
                <div class="motivation-badge">
                    ğŸ’¡ ì²´í—˜ ì¢…ë£Œ ì‹œ, ë‹¹ì‹ ì˜ 'ë„ì›€ ìœ í˜•'ì´ ë¶„ì„ë©ë‹ˆë‹¤!
                </div>
                <p style="font-size: 14px; color: #666; margin-top: 10px;">
                    ë„ìš°ë¯¸, ë™ë°˜ì, ì‹œìŠ¤í…œ ê°œì„ ì ì¤‘ ë‹¹ì‹ ì€ ì–´ë–¤ ì‚¬ëŒì¼ê¹Œìš”?
                </p>
            </div>
            
            <div class="choice-container">
                <div class="choice-title">ë¨¼ì €, ë‹¹ì‹ ì€ ì–´ëŠ ë‹¨ê³¼ëŒ€ í•™ìƒì¸ê°€ìš”?</div>
                <div class="major-select">
                    <button class="major-btn" onclick="selectMajor('ìì—°ëŒ€')">ğŸ”¬ ìì—°ëŒ€</button>
                    <button class="major-btn" onclick="selectMajor('ê³µëŒ€')">âš™ï¸ ê³µëŒ€</button>
                    <button class="major-btn" onclick="selectMajor('ê²½ì˜ëŒ€')">ğŸ“Š ê²½ì˜ëŒ€</button>
                    <button class="major-btn" onclick="selectMajor('ì‚¬ë²”ëŒ€')">ğŸ“š ì‚¬ë²”ëŒ€</button>
                    <button class="major-btn" onclick="selectMajor('ë””ìì¸')">ğŸ¨ ë””ìì¸</button>
                    <button class="major-btn" onclick="selectMajor('ì¸ë¬¸ëŒ€')">ğŸ“– ì¸ë¬¸ëŒ€</button>
                </div>
            </div>
        </div>

        <!-- ìƒí™© 1: ë²„ìŠ¤ ì •ë¥˜ì¥ -->
        <div class="screen" id="situation1">
            <div class="time-badge">â° 08:30 AM</div>
            <div class="story-text">
                <strong>ğŸ“ ë²„ìŠ¤ ì •ë¥˜ì¥</strong><br><br>
                ë³´ë¦¬ì™€ í•¨ê»˜ ë²„ìŠ¤ ì •ë¥˜ì¥ì— ë„ì°©í–ˆì–´. ì—¬ëŸ¬ ëŒ€ì˜ ë²„ìŠ¤ê°€ ì§€ë‚˜ê°€ëŠ”ë°, 
                ì–´ë–¤ ë²„ìŠ¤ê°€ ë‚´ê°€ íƒ€ì•¼ í•  '142ë²ˆ'ì¸ì§€ ëª¨ë¥´ê² ì–´.<br><br>
                ë„ˆëŠ” ë‚˜ ì˜†ì— ì„œ ìˆë‹¤ê°€ ì´ ìƒí™©ì„ ë´¤ì–´.
            </div>
            
            <div class="choice-container">
                <div class="choice-title">ğŸ¤” ë„ˆë¼ë©´ ì–´ë–»ê²Œ í• ê¹Œ?</div>
                <button class="choice-btn" onclick="makeChoice(1, 'help')">
                    ğŸ—£ï¸ "ì € ë²„ìŠ¤ê°€ 142ë²ˆì´ì—ìš”!"ë¼ê³  ì•Œë ¤ì£¼ê¸°
                </button>
                <button class="choice-btn" onclick="makeChoice(1, 'wait')">
                    â³ ë§¤ì‹­ì´ê°€ ìŠ¤ìŠ¤ë¡œ í•´ê²°í•  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê¸°
                </button>
                <button class="choice-btn" onclick="makeChoice(1, 'ask')">
                    ğŸ’¬ "ë„ì›€ì´ í•„ìš”í•˜ì„¸ìš”?"ë¼ê³  ë¨¼ì € ë¬¼ì–´ë³´ê¸°
                </button>
            </div>
        </div>

        <!-- ìƒí™© 2: ê°•ì˜ì‹¤ -->
        <div class="screen" id="situation2">
            <div class="time-badge">â° 10:00 AM</div>
            <div class="story-text">
                <strong>ğŸ“ ê°•ì˜ì‹¤</strong><br><br>
                êµìˆ˜ë‹˜ì´ PPTë¥¼ ë„ìš°ì…¨ì–´. í™”ë©´ì—” ë³µì¡í•œ í‘œì™€ ê·¸ë˜í”„ë§Œ ê°€ë“í•˜ê³ , 
                ì„¤ëª… ì—†ì´ "ì´ ë°ì´í„°ë¥¼ ë³´ì‹œë©´..."ì´ë¼ê³ ë§Œ í•˜ì…”.<br><br>
                ìŠ¤í¬ë¦°ë¦¬ë”ë¡œëŠ” ë‚´ìš©ì„ ì „í˜€ íŒŒì•…í•  ìˆ˜ ì—†ì–´. ë„ˆëŠ” ë‚´ ì˜†ìë¦¬ì— ì•‰ì•„ìˆì–´.
            </div>
            
            <div class="choice-container">
                <div class="choice-title">ğŸ¤” ë„ˆë¼ë©´ ì–´ë–»ê²Œ í• ê¹Œ?</div>
                <button class="choice-btn" onclick="makeChoice(2, 'whisper')">
                    ğŸ—£ï¸ í‘œ ë‚´ìš©ì„ ì‘ì€ ì†Œë¦¬ë¡œ ì„¤ëª…í•´ì£¼ê¸°
                </button>
                <button class="choice-btn" onclick="makeChoice(2, 'note')">
                    ğŸ“ ìˆ˜ì—… í›„ì— í•„ê¸° ë‚´ìš© ê³µìœ í•´ì£¼ê¸°
                </button>
                <button class="choice-btn" onclick="makeChoice(2, 'professor')">
                    ğŸ™‹â€â™€ï¸ êµìˆ˜ë‹˜ê»˜ ì„¤ëª…ì„ ìš”ì²­í•˜ëŠ” ì† ë“¤ê¸°
                </button>
            </div>
        </div>

        <!-- ìƒí™© 3: ì‹ë‹¹ -->
        <div class="screen" id="situation3">
            <div class="time-badge">â° 12:30 PM</div>
            <div class="story-text">
                <strong>ğŸ“ í•™ìƒì‹ë‹¹</strong><br><br>
                ì ì‹¬ì‹œê°„ì´ì•¼. í‚¤ì˜¤ìŠ¤í¬ ì•ì—ì„œ í•œì°¸ ì„œ ìˆëŠ”ë°, 
                í„°ì¹˜ìŠ¤í¬ë¦°ì´ë¼ ì£¼ë¬¸í•  ìˆ˜ê°€ ì—†ì–´. ë’¤ì— ì‚¬ëŒë“¤ì´ ê¸°ë‹¤ë¦¬ê³  ìˆëŠ” ê²ƒ ê°™ì•„ì„œ ì¡°ê¸‰í•´ì ¸.<br><br>
                ë„ˆëŠ” ë‚´ ë’¤ì—ì„œ ì¤„ì„ ì„œê³  ìˆì–´.
            </div>
            
            <div class="choice-container">
                <div class="choice-title">ğŸ¤” ë„ˆë¼ë©´ ì–´ë–»ê²Œ í• ê¹Œ?</div>
                <button class="choice-btn" onclick="makeChoice(3, 'help_order')">
                    ğŸ¤ ì§ì ‘ ì£¼ë¬¸ì„ ë„ì™€ë“œë¦¬ê¸°
                </button>
                <button class="choice-btn" onclick="makeChoice(3, 'explain_menu')">
                    ğŸ“‹ ë©”ë‰´ë¥¼ ì½ì–´ë“œë¦¬ê³  ì›í•˜ëŠ” ê²ƒ ë¬¼ì–´ë³´ê¸°
                </button>
                <button class="choice-btn" onclick="makeChoice(3, 'staff')">
                    ğŸ‘¥ ì‹ë‹¹ ì§ì›ì—ê²Œ ë„ì›€ ìš”ì²­í•˜ê¸°
                </button>
            </div>
        </div>

        <!-- ë‹¨ê³¼ëŒ€ë³„ ë§ì¶¤ ìƒí™© -->
        <div class="screen" id="major_situation">
            <div class="time-badge">â° 14:00 PM</div>
            <div class="story-text" id="major_story">
                <!-- ì—¬ê¸°ì— ë‹¨ê³¼ëŒ€ë³„ ìƒí™©ì´ ë“¤ì–´ê° -->
            </div>
            
            <div class="choice-container">
                <div class="choice-title">ğŸ¤” ë„ˆë¼ë©´ ì–´ë–»ê²Œ í• ê¹Œ?</div>
                <div id="major_choices">
                    <!-- ì—¬ê¸°ì— ë‹¨ê³¼ëŒ€ë³„ ì„ íƒì§€ê°€ ë“¤ì–´ê° -->
                </div>
            </div>
        </div>

        <!-- ìƒí™© 4: ì¡°ë³„ê³¼ì œ -->
        <div class="screen" id="situation4">
            <div class="time-badge">â° 16:00 PM</div>
            <div class="story-text">
                <strong>ğŸ“ ìŠ¤í„°ë””ë£¸</strong><br><br>
                ì¡°ë³„ê³¼ì œ ë°œí‘œ ì¤€ë¹„ ì¤‘ì´ì•¼. íŒ€ì›ë“¤ì´ ë§Œë“  PPTëŠ” ë„í‘œì™€ ì´ë¯¸ì§€ ì¤‘ì‹¬ì´ë¼ 
                ë‚´ê°€ ë°œí‘œí•  ë¶€ë¶„ì„ ì´í•´í•˜ê¸° ì–´ë ¤ì›Œ.<br><br>
                "ë§¤ì‹­ì•„, ë„ˆëŠ” ì´ ë¶€ë¶„ ë§¡ì•„."ë¼ê³  í•˜ëŠ”ë°... ë„ˆë„ ê°™ì€ íŒ€ì´ì•¼.
            </div>
            
            <div class="choice-container">
                <div class="choice-title">ğŸ¤” ë„ˆë¼ë©´ ì–´ë–»ê²Œ í• ê¹Œ?</div>
                <button class="choice-btn" onclick="makeChoice(4, 'explain')">
                    ğŸ“Š ìŠ¬ë¼ì´ë“œ ë‚´ìš©ì„ ìì„¸íˆ ì„¤ëª…í•´ì£¼ê¸°
                </button>
                <button class="choice-btn" onclick="makeChoice(4, 'text')">
                    ğŸ“ í…ìŠ¤íŠ¸ ë²„ì „ ëŒ€ë³¸ í•¨ê»˜ ì‘ì„±í•˜ê¸°
                </button>
                <button class="choice-btn" onclick="makeChoice(4, 'role')">
                    ğŸ”„ ë§¤ì‹­ì´ì—ê²Œ ë§ëŠ” ì—­í•  ë‹¤ì‹œ ë¶„ë°° ì œì•ˆí•˜ê¸°
                </button>
            </div>
        </div>

        <!-- ìƒí™© 5: ì—˜ë¦¬ë² ì´í„° -->
        <div class="screen" id="situation5">
            <div class="time-badge">â° 18:00 PM</div>
            <div class="story-text">
                <strong>ğŸ“ ì—˜ë¦¬ë² ì´í„° ì•</strong><br><br>
                í•˜ë£¨ ì¼ê³¼ë¥¼ ë§ˆì¹˜ê³  ì—˜ë¦¬ë² ì´í„°ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆì–´. 
                ì—˜ë¦¬ë² ì´í„°ê°€ ë„ì°©í–ˆëŠ”ë° ì–´ëŠ ìª½ ë¬¸ì´ ì—´ë ¸ëŠ”ì§€, ì•ˆì— ì‚¬ëŒì´ ì–¼ë§ˆë‚˜ ìˆëŠ”ì§€ ëª¨ë¥´ê² ì–´.<br><br>
                ë„ˆë„ ê°™ì€ ì—˜ë¦¬ë² ì´í„°ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆì–´.
            </div>
            
            <div class="choice-container">
                <div class="choice-title">ğŸ¤” ë„ˆë¼ë©´ ì–´ë–»ê²Œ í• ê¹Œ?</div>
                <button class="choice-btn" onclick="makeChoice(5, 'guide')">
                    ğŸ‘‰ "ì™¼ìª½ì— ë¬¸ì´ ì—´ë ¸ì–´ìš”, ì‚¬ëŒì´ ë³„ë¡œ ì—†ì–´ìš”"ë¼ê³  ì•ˆë‚´
                </button>
                <button class="choice-btn" onclick="makeChoice(5, 'arm')">
                    ğŸ¤ íŒ”ì„ ì‚´ì§ ì¡ê³  ì—˜ë¦¬ë² ì´í„°ê¹Œì§€ ì•ˆë‚´
                </button>
                <button class="choice-btn" onclick="makeChoice(5, 'together')">
                    ğŸš¶â€â™‚ï¸ "ê°™ì´ íƒ€ìš”"ë¼ê³  ë§í•˜ë©° í•¨ê»˜ ì´ë™
                </button>
            </div>
        </div>

        <!-- ê²°ê³¼ í™”ë©´ -->
        <div class="screen" id="result">
            <div class="character-img">ğŸ‰</div>
            <div class="story-text">
                <strong>ìˆ˜ê³ í–ˆì–´! ë„ˆì™€ í•¨ê»˜í•œ í•˜ë£¨ê°€ ì •ë§ ì˜ë¯¸ìˆì—ˆì–´.</strong><br><br>
                ë„ˆëŠ” ë§¤ì‹­ì´ì˜ í•˜ë£¨ ì†ì—ì„œ ì´ëŸ° ì„ íƒë“¤ì„ í–ˆì–´:
            </div>
            
            <div id="choice_summary">
                <!-- ì„ íƒ ìš”ì•½ì´ ì—¬ê¸°ì— ë“¤ì–´ê° -->
            </div>

            <!-- ìƒˆë¡œìš´ ê²°ê³¼ ê³µìœ  ì¹´ë“œ -->
            <div class="result-card" id="resultCard">
                <div class="result-type" id="resultType">
                    ğŸ¤ ì†Œí†µí˜• ë™ë°˜ì
                </div>
                <div class="result-description" id="resultDescription">
                    ìƒëŒ€ë°©ì˜ ì˜ê²¬ì„ ë¨¼ì € ë¬»ê³  í•¨ê»˜ í•´ê²°ì±…ì„ ì°¾ìœ¼ë ¤ëŠ” ë°°ë ¤ì‹¬ì´ ê¹Šì–´ìš”.
                </div>
            </div>

            <div class="feedback">
                <strong>ğŸ’¡ ì•Œì•„ë‘ë©´ ì¢‹ì€ íŒ</strong><br>
                ì‹œê°ì¥ì• ì¸ì„ ë„ìš¸ ë•ŒëŠ” ë¨¼ì € "ë„ì›€ì´ í•„ìš”í•˜ì„¸ìš”?"ë¼ê³  ë¬¼ì–´ë³´ëŠ” ê²ƒì´ ì¢‹ì•„ìš”. 
                ê°‘ìê¸° íŒ”ì„ ì¡ê±°ë‚˜ ë°€ì§€ ë§ê³ , êµ¬ì²´ì ìœ¼ë¡œ ìƒí™©ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”!
            </div>

            <div class="guide-card">
                <strong>ğŸ¤ ì´ëŸ´ ë•Œ ì´ë ‡ê²Œ í•´ì£¼ì„¸ìš”</strong><br>
                â€¢ ê¸¸ ì•ˆë‚´: "3ì‹œ ë°©í–¥ìœ¼ë¡œ 2ë¯¸í„°" ê°™ì´ êµ¬ì²´ì ìœ¼ë¡œ<br>
                â€¢ ê³„ë‹¨: "ìœ„ë¡œ ì˜¬ë¼ê°€ëŠ” ê³„ë‹¨ 5ê°œ" ë¯¸ë¦¬ ì•Œë ¤ì£¼ê¸°<br>
                â€¢ ë¬¸ì„œ: í‘œë‚˜ ê·¸ë˜í”„ëŠ” ë‚´ìš©ì„ ê°„ëµíˆ ì„¤ëª…<br>
                â€¢ í‚¤ì˜¤ìŠ¤í¬: ë©”ë‰´ ì½ì–´ì£¼ê³  ì„ íƒê¶Œ ì£¼ê¸°
            </div>

            <div class="share-section">
                <div class="badge">ğŸ† ê³µê° ì²´í—˜ ì™„ë£Œ!</div>
                <p>ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ ì²´í—˜í•´ë³´ì„¸ìš”</p>
                
                <div class="share-buttons">
                    <button class="share-btn twitter" onclick="shareToTwitter()">
                        ğŸ¦ íŠ¸ìœ„í„° ê³µìœ 
                    </button>
                    <button class="share-btn kakao" onclick="shareToKakao()">
                        ğŸ’¬ ì¹´ì¹´ì˜¤ ê³µìœ 
                    </button>
                </div>
                
                <button class="btn-primary" onclick="downloadResultImage()">
                    ğŸ“¸ ê²°ê³¼ ì´ë¯¸ì§€ ì €ì¥í•˜ê¸°
                </button>
                <button class="btn-secondary" onclick="restart()">
                    ğŸ”„ ë‹¤ì‹œ ì²´í—˜í•˜ê¸°
                </button>
            </div>
        </div>
    </div>

    <!-- í”¼ë“œë°± ëª¨ë‹¬ -->
    <div class="modal" id="feedbackModal">
        <div class="modal-content">
            <div class="modal-character" id="modalCharacter">ğŸ˜Š</div>
            <div class="modal-title" id="modalTitle">ì¢‹ì€ ì„ íƒì´ì—ìš”!</div>
            <div class="modal-feedback" id="modalFeedback">
                ë¨¼ì € "ë„ì›€ì´ í•„ìš”í•˜ì„¸ìš”?"ë¼ê³  ë¬¼ì–´ë³´ëŠ” ê²ƒì€ ìƒëŒ€ë°©ì„ ì¡´ì¤‘í•˜ëŠ” ë§ˆìŒì´ì—ìš”!
            </div>
            <div>
                <button class="modal-btn retry-btn" id="retryBtn" onclick="retryChoice()" style="display: none;">
                    ğŸ”„ ë‹¤ì‹œ ì„ íƒí•˜ê¸°
                </button>
                <button class="modal-btn" onclick="closeModal()">
                    â¡ï¸ ë‹¤ìŒìœ¼ë¡œ
                </button>
            </div>
        </div>
    </div>

    <script>
        let currentScreen = 0;
        let userChoices = [];
        let userMajor = '';
        let currentSituation = null;
        let retryCount = 0;
        
        const totalScreens = 7; // ì‹œì‘ + 5ìƒí™© + ê²°ê³¼
        
        // í”¼ë“œë°± ë°ì´í„°
        const feedbackMap = {
            1: { // ë²„ìŠ¤ ì •ë¥˜ì¥
                'help': { 
                    isCorrect: false, 
                    feedback: 'ì˜ë„ëŠ” ì¢‹ì§€ë§Œ, ê°‘ìê¸° ì†Œë¦¬ë¥¼ ë‚´ë©´ ì‹œê°ì¥ì• ì¸ì´ ë‹¹í™©í•  ìˆ˜ ìˆì–´ìš”. ë¨¼ì € "ë„ì›€ì´ í•„ìš”í•˜ì„¸ìš”?"ë¼ê³  ë¬¼ì–´ë³´ëŠ” ê²ƒì´ ë” ì¢‹ì•„ìš”.',
                    character: 'ğŸ˜Ÿ'
                },
                'wait': { 
                    isCorrect: false, 
                    feedback: 'ê¸°ë‹¤ë ¤ì£¼ëŠ” ë§ˆìŒì€ ì¢‹ì§€ë§Œ, ë„ˆë¬´ ì˜¤ë˜ ê¸°ë‹¤ë¦¬ê²Œ í•˜ë©´ ë¶ˆí¸í•  ìˆ˜ ìˆì–´ìš”. ì ì ˆí•œ ë•Œì— ë„ì›€ì„ ì œì•ˆí•´ë³´ì„¸ìš”.',
                    character: 'ğŸ˜'
                },
                'ask': { 
                    isCorrect: true, 
                    feedback: 'ì™„ë²½í•´ìš”! "ë„ì›€ì´ í•„ìš”í•˜ì„¸ìš”?"ë¼ê³  ë¨¼ì € ë¬¼ì–´ë³´ëŠ” ê²ƒì€ ìƒëŒ€ë°©ì˜ ì£¼ë„ê¶Œì„ ì¡´ì¤‘í•˜ëŠ” ìµœê³ ì˜ ë°©ë²•ì´ì—ìš”.',
                    character: 'ğŸ˜Š'
                }
            },
            2: { // ê°•ì˜ì‹¤
                'whisper': { 
                    isCorrect: true, 
                    feedback: 'í›Œë¥­í•´ìš”! ì‹¤ì‹œê°„ìœ¼ë¡œ ë‚´ìš©ì„ ì„¤ëª…í•´ì£¼ë©´ ìˆ˜ì—…ì„ ë†“ì¹˜ì§€ ì•Šê³  ë”°ë¼ê°ˆ ìˆ˜ ìˆì–´ìš”. ì‘ì€ ì†Œë¦¬ë¡œ í•˜ëŠ” ê²ƒë„ ë°°ë ¤ì‹¬ì´ ê¹Šì–´ìš”.',
                    character: 'ğŸ˜Š'
                },
                'note': { 
                    isCorrect: false, 
                    feedback: 'í•„ê¸° ê³µìœ ëŠ” ì¢‹ì€ ìƒê°ì´ì§€ë§Œ, ìˆ˜ì—… ì¤‘ì—ëŠ” ì‹¤ì‹œê°„ ì •ë³´ê°€ ë” í•„ìš”í•´ìš”. ë‚˜ì¤‘ì— ë³µìŠµí•  ë•Œ ë„ì›€ì´ ë˜ê² ì§€ë§Œìš”.',
                    character: 'ğŸ˜'
                },
                'professor': { 
                    isCorrect: true, 
                    feedback: 'ì¢‹ì€ ì„ íƒì´ì—ìš”! êµìˆ˜ë‹˜ê»˜ ìš”ì²­í•˜ë©´ ëª¨ë“  í•™ìƒì´ í•¨ê»˜ í˜œíƒì„ ë°›ì„ ìˆ˜ ìˆì–´ìš”. ê·¼ë³¸ì ì¸ í•´ê²°ì±…ì´ì£ .',
                    character: 'ğŸ˜Š'
                }
            },
            3: { // ì‹ë‹¹
                'help_order': { 
                    isCorrect: false, 
                    feedback: 'ì§ì ‘ ë„ì™€ì£¼ë ¤ëŠ” ë§ˆìŒì€ ê³ ë§™ì§€ë§Œ, ë³¸ì¸ì˜ ì„ íƒê¶Œì„ ë¹¼ì•—ì„ ìˆ˜ ìˆì–´ìš”. ë©”ë‰´ë¥¼ ì„¤ëª…í•´ì£¼ê³  ì„ íƒí•˜ê²Œ í•˜ëŠ” ê²ƒì´ ë” ì¢‹ì•„ìš”.',
                    character: 'ğŸ˜Ÿ'
                },
                'explain_menu': { 
                    isCorrect: true, 
                    feedback: 'ì •ë§ ì¢‹ì€ ë°©ë²•ì´ì—ìš”! ë©”ë‰´ ì˜µì…˜ì„ ì„¤ëª…í•´ì£¼ê³  ì„ íƒê¶Œì„ ì£¼ë©´ ë…ë¦½ì ìœ¼ë¡œ ì£¼ë¬¸í•  ìˆ˜ ìˆì–´ìš”.',
                    character: 'ğŸ˜Š'
                },
                'staff': { 
                    isCorrect: true, 
                    feedback: 'í˜„ëª…í•œ ì„ íƒì´ì—ìš”! ì§ì›ì—ê²Œ ë„ì›€ì„ ìš”ì²­í•˜ë©´ ì•ìœ¼ë¡œë„ ë‹¤ë¥¸ ì‹œê°ì¥ì• ì¸ë“¤ì´ ë” ë‚˜ì€ ì„œë¹„ìŠ¤ë¥¼ ë°›ì„ ìˆ˜ ìˆì–´ìš”.',
                    character: 'ğŸ˜Š'
                }
            },
            4: { // ì¡°ë³„ê³¼ì œ
                'explain': { 
                    isCorrect: true, 
                    feedback: 'ìµœê³ ì˜ˆìš”! ìŠ¬ë¼ì´ë“œ ë‚´ìš©ì„ ìì„¸íˆ ì„¤ëª…í•´ì£¼ë©´ ë°œí‘œ ì¤€ë¹„ë¥¼ ì œëŒ€ë¡œ í•  ìˆ˜ ìˆì–´ìš”.',
                    character: 'ğŸ˜Š'
                },
                'text': { 
                    isCorrect: true, 
                    feedback: 'ì™„ë²½í•œ í•´ê²°ì±…ì´ì—ìš”! í…ìŠ¤íŠ¸ ë²„ì „ ëŒ€ë³¸ì´ ìˆìœ¼ë©´ ì—°ìŠµë„ í•˜ê³  ìì‹ ê° ìˆê²Œ ë°œí‘œí•  ìˆ˜ ìˆì–´ìš”.',
                    character: 'ğŸ˜Š'
                },
                'role': { 
                    isCorrect: true, 
                    feedback: 'ì •ë§ ë°°ë ¤ì‹¬ì´ ê¹Šì€ ì„ íƒì´ì—ìš”! ê°ìì˜ ê°•ì ì„ ì‚´ë¦° ì—­í•  ë¶„ë°°ëŠ” íŒ€ ì „ì²´ì— ë„ì›€ì´ ë¼ìš”.',
                    character: 'ğŸ˜Š'
                }
            },
            5: { // ì—˜ë¦¬ë² ì´í„°
                'guide': { 
                    isCorrect: true, 
                    feedback: 'ì™„ë²½í•´ìš”! êµ¬ì²´ì ì´ê³  ëª…í™•í•œ ìƒí™© ì„¤ëª…ì€ ì‹œê°ì¥ì• ì¸ì—ê²Œ ê°€ì¥ ë„ì›€ì´ ë˜ëŠ” ë°©ë²•ì´ì—ìš”.',
                    character: 'ğŸ˜Š'
                },
                'arm': { 
                    isCorrect: false, 
                    feedback: 'ê°‘ìê¸° íŒ”ì„ ì¡ìœ¼ë©´ ë†€ë„ ìˆ˜ ìˆì–´ìš”. ë¨¼ì € "ì•ˆë‚´í•´ë“œë¦´ê¹Œìš”?"ë¼ê³  ë¬¼ì–´ë³´ê³  í—ˆë½ì„ ë°›ëŠ” ê²ƒì´ ì¢‹ì•„ìš”.',
                    character: 'ğŸ˜Ÿ'
                },
                'together': { 
                    isCorrect: true, 
                    feedback: 'ì¢‹ì€ ë°©ë²•ì´ì—ìš”! ìì—°ìŠ¤ëŸ½ê²Œ í•¨ê»˜ ì´ë™í•˜ë©° í•„ìš”ì‹œ ë„ì›€ì„ ì¤„ ìˆ˜ ìˆëŠ” ë°°ë ¤ì‹¬ ìˆëŠ” ì„ íƒì´ì—ìš”.',
                    character: 'ğŸ˜Š'
                }
            }
        };

        const majorSituations = {
            'ìì—°ëŒ€': {
                story: '<strong>ğŸ“ ì‹¤í—˜ì‹¤</strong><br><br>ìƒë¬¼í•™ ì‹¤í—˜ ìˆ˜ì—…ì´ì•¼. êµìˆ˜ë‹˜ì´ "í˜„ë¯¸ê²½ìœ¼ë¡œ ê´€ì°°í•œ ê²°ê³¼ë¥¼ ë³´ê³ ì„œì— ì‘ì„±í•˜ì„¸ìš”"ë¼ê³  í•˜ì…¨ì–´.<br><br>ì‹¤í—˜ íŒŒíŠ¸ë„ˆì¸ ë„ˆëŠ” í˜„ë¯¸ê²½ì„ ë³´ê³  ìˆê³ , ë‚˜ëŠ” ê´€ì°° ê²°ê³¼ë¥¼ ì–´ë–»ê²Œ íŒŒì•…í• ì§€ ê³ ë¯¼ ì¤‘ì´ì•¼.',
                choices: [
                    { text: 'ğŸ”¬ ë³´ì´ëŠ” ê²ƒì„ ìì„¸íˆ ë¬˜ì‚¬í•´ì£¼ê¸°', value: 'describe', isCorrect: true, feedback: 'ì™„ë²½í•´ìš”! ê´€ì°° ë‚´ìš©ì„ êµ¬ì²´ì ìœ¼ë¡œ ë¬˜ì‚¬í•´ì£¼ë©´ ì‹¤í—˜ ê²°ê³¼ë¥¼ ì •í™•íˆ íŒŒì•…í•  ìˆ˜ ìˆì–´ìš”.', character: 'ğŸ˜Š' },
                    { text: 'ğŸ“ ê´€ì°° ê²°ê³¼ë¥¼ í•¨ê»˜ ì •ë¦¬í•˜ê¸°', value: 'write', isCorrect: true, feedback: 'ì¢‹ì€ ë°©ë²•ì´ì—ìš”! í•¨ê»˜ ì •ë¦¬í•˜ë©´ì„œ ì„œë¡œ í™•ì¸í•  ìˆ˜ ìˆì–´ ë” ì •í™•í•œ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆì–´ìš”.', character: 'ğŸ˜Š' },
                    { text: 'ğŸ“¸ í˜„ë¯¸ê²½ ì´ë¯¸ì§€ë¥¼ ì°ì–´ì„œ ë‚˜ì¤‘ì— ì„¤ëª…', value: 'photo', isCorrect: false, feedback: 'ì‚¬ì§„ì€ ë„ì›€ì´ ë˜ì§€ë§Œ, ì‹¤í—˜ ì¤‘ ì‹¤ì‹œê°„ ê´€ì°°ì´ ë” ì¤‘ìš”í•´ìš”. ì§€ê¸ˆ ë‹¹ì¥ ì„¤ëª…í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ê² ì–´ìš”.', character: 'ğŸ˜' }
                ]
            },
            'ê³µëŒ€': {
                story: '<strong>ğŸ“ ì„¤ê³„ ìˆ˜ì—…</strong><br><br>CAD í”„ë¡œê·¸ë¨ìœ¼ë¡œ ê¸°ê³„ ì„¤ê³„ ê³¼ì œë¥¼ í•˜ê³  ìˆì–´. í™”ë©´ì˜ 3D ëª¨ë¸ë§ì€ ìŠ¤í¬ë¦°ë¦¬ë”ë¡œ íŒŒì•…ì´ ë¶ˆê°€ëŠ¥í•´.<br><br>ë„ˆëŠ” ë‚´ ì˜†ì—ì„œ ê°™ì€ ê³¼ì œë¥¼ í•˜ê³  ìˆì–´.',
                choices: [
                    { text: 'âš™ï¸ ì„¤ê³„ êµ¬ì¡°ë¥¼ ë§ë¡œ ì„¤ëª…í•´ì£¼ê¸°', value: 'explain', isCorrect: true, feedback: 'í›Œë¥­í•´ìš”! 3D êµ¬ì¡°ë¥¼ ë§ë¡œ ì„¤ëª…í•´ì£¼ë©´ ì „ì²´ì ì¸ ì„¤ê³„ë¥¼ ì´í•´í•  ìˆ˜ ìˆì–´ìš”.', character: 'ğŸ˜Š' },
                    { text: 'ğŸ¤ ì„¤ê³„ë¥¼ í•¨ê»˜ ì§„í–‰í•˜ê¸°', value: 'collaborate', isCorrect: true, feedback: 'ì™„ë²½í•œ íŒ€ì›Œí¬ì˜ˆìš”! í•¨ê»˜ ì„¤ê³„í•˜ë©´ì„œ ì„œë¡œì˜ ì•„ì´ë””ì–´ë¥¼ ë‚˜ëˆŒ ìˆ˜ ìˆì–´ ë” ì¢‹ì€ ê²°ê³¼ê°€ ë‚˜ì˜¬ ê±°ì˜ˆìš”.', character: 'ğŸ˜Š' },
                    { text: 'ğŸ“ ì¹˜ìˆ˜ì™€ ê·œê²©ì„ ë¶ˆëŸ¬ì£¼ê¸°', value: 'dimensions', isCorrect: false, feedback: 'ì¹˜ìˆ˜ ì •ë³´ëŠ” ë„ì›€ì´ ë˜ì§€ë§Œ, ì „ì²´ì ì¸ êµ¬ì¡° ì´í•´ê°€ ìš°ì„ ì´ì—ìš”. ì„¤ê³„ ì»¨ì…‰ë¶€í„° ì„¤ëª…í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ê² ì–´ìš”.', character: 'ğŸ˜' }
                ]
            },
            'ê²½ì˜ëŒ€': {
                story: '<strong>ğŸ“ ê²½ì˜ì „ëµ ìˆ˜ì—…</strong><br><br>íŒ€ í”„ë¡œì íŠ¸ì—ì„œ ì‹œì¥ ë¶„ì„ ì°¨íŠ¸ë¥¼ ë°œí‘œí•´ì•¼ í•´. PPTì—ëŠ” ë³µì¡í•œ ê·¸ë˜í”„ì™€ ë„í‘œë“¤ì´ ê°€ë“í•´.<br><br>ê°™ì€ íŒ€ì¸ ë„ˆëŠ” ì°¨íŠ¸ë¥¼ ë³´ë©° ë°œí‘œ ì¤€ë¹„ë¥¼ í•˜ê³  ìˆì–´.',
                choices: [
                    { text: 'ğŸ“Š ì°¨íŠ¸ ë°ì´í„°ë¥¼ í‘œë¡œ ì •ë¦¬í•´ì£¼ê¸°', value: 'data', isCorrect: true, feedback: 'ìµœê³ ì˜ ì„ íƒì´ì—ìš”! ì‹œê°ì  ë°ì´í„°ë¥¼ í…ìŠ¤íŠ¸ë¡œ ì •ë¦¬í•´ì£¼ë©´ ë¶„ì„í•˜ê³  ë°œí‘œí•˜ê¸°ê°€ í›¨ì”¬ ì‰¬ì›Œì ¸ìš”.', character: 'ğŸ˜Š' },
                    { text: 'ğŸ—£ï¸ ë°œí‘œ ëŒ€ë³¸ì„ í•¨ê»˜ ì‘ì„±í•˜ê¸°', value: 'script', isCorrect: true, feedback: 'ì™„ë²½í•´ìš”! í•¨ê»˜ ëŒ€ë³¸ì„ ì‘ì„±í•˜ë©´ ì°¨íŠ¸ ë‚´ìš©ì„ ì™„ì „íˆ ì´í•´í•˜ê³  ìì‹ ìˆê²Œ ë°œí‘œí•  ìˆ˜ ìˆì–´ìš”.', character: 'ğŸ˜Š' },
                    { text: 'ğŸ“ˆ íŠ¸ë Œë“œë¥¼ ë§ë¡œ ìš”ì•½í•´ì£¼ê¸°', value: 'summary', isCorrect: false, feedback: 'ìš”ì•½ì€ ë„ì›€ì´ ë˜ì§€ë§Œ, ë°œí‘œë¥¼ ìœ„í•´ì„œëŠ” ë” ìì„¸í•œ ë°ì´í„°ê°€ í•„ìš”í•´ìš”. êµ¬ì²´ì ì¸ ìˆ˜ì¹˜ê¹Œì§€ ì•Œë ¤ì£¼ë©´ ì¢‹ê² ì–´ìš”.', character: 'ğŸ˜' }
                ]
            },
            'ì‚¬ë²”ëŒ€': {
                story: '<strong>ğŸ“ êµìœ¡í•™ ìˆ˜ì—…</strong><br><br>ìˆ˜ì—… êµì•ˆ ì‘ì„± ê³¼ì œì•¼. ì‹œê° ìë£Œë¥¼ í™œìš©í•œ ìˆ˜ì—… ê³„íšì„ ì„¸ì›Œì•¼ í•˜ëŠ”ë°, ì–´ë–¤ ì´ë¯¸ì§€ë‚˜ ì˜ìƒì„ ì‚¬ìš©í• ì§€ ê°ì´ ì•ˆ ì™€.<br><br>ë„ˆë„ ê°™ì€ ê³¼ì œë¥¼ í•˜ê³  ìˆì–´.',
                choices: [
                    { text: 'ğŸ¨ ì‹œê° ìë£Œ ì•„ì´ë””ì–´ í•¨ê»˜ ë…¼ì˜í•˜ê¸°', value: 'brainstorm', isCorrect: true, feedback: 'í›Œë¥­í•œ í˜‘ë ¥ì´ì—ìš”! í•¨ê»˜ ì•„ì´ë””ì–´ë¥¼ ë‚˜ëˆ„ë©´ ë” ì°½ì˜ì ì´ê³  íš¨ê³¼ì ì¸ ìˆ˜ì—…ì„ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”.', character: 'ğŸ˜Š' },
                    { text: 'ğŸ“š ëŒ€ì²´ í…ìŠ¤íŠ¸ê°€ í¬í•¨ëœ ìë£Œ ì°¾ê¸°', value: 'accessible', isCorrect: true, feedback: 'ì •ë§ ë°°ë ¤ì‹¬ ê¹Šì€ ì„ íƒì´ì—ìš”! ì ‘ê·¼ì„±ì„ ê³ ë ¤í•œ ìë£Œë¥¼ ì°¾ëŠ” ê²ƒì€ ëª¨ë“  í•™ìƒì„ ìœ„í•œ ìµœê³ ì˜ ë°©ë²•ì´ì—ìš”.', character: 'ğŸ˜Š' },
                    { text: 'ğŸ­ ì²´í—˜í˜• í™œë™ìœ¼ë¡œ ìˆ˜ì—… ê³„íš ë³€ê²½ ì œì•ˆ', value: 'activity', isCorrect: true, feedback: 'ì°½ì˜ì ì¸ í•´ê²°ì±…ì´ì—ìš”! ì²´í—˜ í™œë™ì€ ì‹œê° ìë£Œ ì—†ì´ë„ íš¨ê³¼ì ì¸ í•™ìŠµì´ ê°€ëŠ¥í•œ í›Œë¥­í•œ ë°©ë²•ì´ì—ìš”.', character: 'ğŸ˜Š' }
                ]
            },
            'ë””ìì¸': {
                story: '<strong>ğŸ“ ë””ìì¸ ìŠ¤íŠœë””ì˜¤</strong><br><br>í¬ìŠ¤í„° ë””ìì¸ ê³¼ì œ í”¼ë“œë°± ì‹œê°„ì´ì•¼. êµìˆ˜ë‹˜ê³¼ í•™ìƒë“¤ì´ ì‹œê°ì  ìš”ì†Œì— ëŒ€í•´ì„œë§Œ ì´ì•¼ê¸°í•˜ê³  ìˆì–´.<br><br>"ìƒ‰ê°ì´ ì–´ë– ëƒ", "ë ˆì´ì•„ì›ƒì´ ì–´ë– ëƒ" í•˜ëŠ”ë°... ë„ˆëŠ” ë‚´ ì‘í’ˆë„ ë³´ê³  ìˆì–´.',
                choices: [
                    { text: 'ğŸ¨ ìƒ‰ìƒê³¼ êµ¬ì„±ì„ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…í•´ì£¼ê¸°', value: 'describe', isCorrect: true, feedback: 'ì™„ë²½í•´ìš”! ìƒ‰ìƒê³¼ êµ¬ì„±ì„ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…í•´ì£¼ë©´ ë””ìì¸ ì˜ë„ë¥¼ ì™„ì „íˆ íŒŒì•…í•  ìˆ˜ ìˆì–´ìš”.', character: 'ğŸ˜Š' },
                    { text: 'ğŸ’¡ ë””ìì¸ ì»¨ì…‰ì„ ì¤‘ì‹¬ìœ¼ë¡œ í”¼ë“œë°±í•˜ê¸°', value: 'concept', isCorrect: true, feedback: 'ì •ë§ ì¢‹ì€ ì ‘ê·¼ì´ì—ìš”! ì»¨ì…‰ ì¤‘ì‹¬ì˜ í”¼ë“œë°±ì€ ì‹œê°ì  í•œê³„ë¥¼ ë„˜ì–´ì„œëŠ” ê¹Šì´ ìˆëŠ” í‰ê°€ì˜ˆìš”.', character: 'ğŸ˜Š' },
                    { text: 'âœ‹ êµìˆ˜ë‹˜ê»˜ ì„¤ëª…ì  í”¼ë“œë°± ìš”ì²­í•˜ê¸°', value: 'request', isCorrect: true, feedback: 'í˜„ëª…í•œ ì„ íƒì´ì—ìš”! êµìˆ˜ë‹˜ê»˜ ìš”ì²­í•˜ë©´ ì•ìœ¼ë¡œ ëª¨ë“  í•™ìƒì´ ë” í¬ê´„ì ì¸ í”¼ë“œë°±ì„ ë°›ì„ ìˆ˜ ìˆì–´ìš”.', character: 'ğŸ˜Š' }
                ]
            },
            'ì¸ë¬¸ëŒ€': {
                story: '<strong>ğŸ“ ë¬¸í•™ ì„¸ë¯¸ë‚˜</strong><br><br>ê³ ì „ ë¬¸í•™ ì‘í’ˆ ë¶„ì„ ë°œí‘œ ì‹œê°„ì´ì•¼. ë‹¤ë¥¸ í•™ìƒì´ ì‘í’ˆ ì† ì‚½í™”ë¥¼ ë³´ì—¬ì£¼ë©° "ì´ ê·¸ë¦¼ì—ì„œ ë³´ë“¯ì´..."ë¼ê³  ì„¤ëª…í•˜ê³  ìˆì–´.<br><br>ë„ˆë„ ê°™ì€ ì„¸ë¯¸ë‚˜ì— ì°¸ì—¬í•˜ê³  ìˆì–´.',
                choices: [
                    { text: 'ğŸ–¼ï¸ ì‚½í™” ë‚´ìš©ì„ ê°„ë‹¨íˆ ì„¤ëª…í•´ì£¼ê¸°', value: 'describe', isCorrect: true, feedback: 'ì¢‹ì€ ë„ì›€ì´ì—ìš”! ì‚½í™” ë‚´ìš©ì„ ì„¤ëª…í•´ì£¼ë©´ ë°œí‘œ ë‚´ìš©ì„ ì™„ì „íˆ ì´í•´í•  ìˆ˜ ìˆì–´ìš”.', character: 'ğŸ˜Š' },
                    { text: 'ğŸ“– í…ìŠ¤íŠ¸ ê¸°ë°˜ ë¶„ì„ìœ¼ë¡œ í† ë¡  ì´ëŒê¸°', value: 'text_focus', isCorrect: true, feedback: 'í›Œë¥­í•œ ë°©ë²•ì´ì—ìš”! í…ìŠ¤íŠ¸ ì¤‘ì‹¬ì˜ ë¶„ì„ì€ ëª¨ë“  ì°¸ì—¬ìê°€ í•¨ê»˜í•  ìˆ˜ ìˆëŠ” í¬ê´„ì ì¸ í† ë¡ ì„ ë§Œë“¤ì–´ìš”.', character: 'ğŸ˜Š' },
                    { text: 'ğŸ—£ï¸ ë°œí‘œìì—ê²Œ ì„¤ëª… ë³´ì¶© ìš”ì²­í•˜ê¸°', value: 'clarify', isCorrect: true, feedback: 'ì ê·¹ì ì´ê³  ì¢‹ì€ ìì„¸ì˜ˆìš”! ì„¤ëª…ì„ ìš”ì²­í•˜ëŠ” ê²ƒì€ ëª¨ë“  ì‚¬ëŒì˜ ì´í•´ë¥¼ ë•ëŠ” ê¸ì •ì ì¸ í–‰ë™ì´ì—ìš”.', character: 'ğŸ˜Š' }
                ]
            }
        };

        function updateProgress() {
            const progress = (currentScreen / totalScreens) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function selectMajor(major) {
            userMajor = major;
            showScreen('situation1');
        }

        function showScreen(screenId) {
            // ëª¨ë“  í™”ë©´ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // ì„ íƒëœ í™”ë©´ ë³´ì´ê¸°
            document.getElementById(screenId).classList.add('active');
            
            // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            if (screenId === 'situation1') currentScreen = 1;
            else if (screenId === 'situation2') currentScreen = 2;
            else if (screenId === 'situation3') currentScreen = 3;
            else if (screenId === 'major_situation') currentScreen = 4;
            else if (screenId === 'situation4') currentScreen = 5;
            else if (screenId === 'situation5') currentScreen = 6;
            else if (screenId === 'result') currentScreen = 7;
            
            updateProgress();
            
            // ë‹¨ê³¼ëŒ€ë³„ ìƒí™© ì„¤ì •
            if (screenId === 'major_situation') {
                setupMajorSituation();
            }
            
            // í˜ì´ì§€ ìµœìƒë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤
            window.scrollTo(0, 0);
        }

        function setupMajorSituation() {
            const situation = majorSituations[userMajor];
            document.getElementById('major_story').innerHTML = situation.story;
            
            const choicesContainer = document.getElementById('major_choices');
            choicesContainer.innerHTML = '';
            
            situation.choices.forEach(choice => {
                const button = document.createElement('button');
                button.className = 'choice-btn';
                button.textContent = choice.text;
                button.onclick = () => makeChoice('major', choice.value);
                choicesContainer.appendChild(button);
            });
        }

        function makeChoice(situation, choice) {
            currentSituation = situation;
            
            // í”¼ë“œë°± ëª¨ë‹¬ í‘œì‹œ
            showFeedbackModal(situation, choice);
            
            userChoices.push({
                situation: situation,
                choice: choice,
                major: userMajor
            });
        }

        function showFeedbackModal(situation, choice) {
            let feedback;
            
            if (situation === 'major') {
                const majorSituation = majorSituations[userMajor];
                feedback = majorSituation.choices.find(c => c.value === choice);
            } else {
                feedback = feedbackMap[situation][choice];
            }
            
            const modal = document.getElementById('feedbackModal');
            const character = document.getElementById('modalCharacter');
            const title = document.getElementById('modalTitle');
            const feedbackText = document.getElementById('modalFeedback');
            const retryBtn = document.getElementById('retryBtn');
            
            // ìºë¦­í„°ì™€ ì œëª© ì„¤ì •
            character.textContent = feedback.character;
            character.className = `modal-character ${feedback.isCorrect ? 'correct' : 'incorrect'}`;
            
            title.textContent = feedback.isCorrect ? 'ì¢‹ì€ ì„ íƒì´ì—ìš”! ğŸ˜Š' : 'ë‹¤ì‹œ ìƒê°í•´ë³¼ê¹Œìš”? ğŸ˜Ÿ';
            feedbackText.textContent = feedback.feedback;
            
            // ì¬ì‹œë„ ë²„íŠ¼ í‘œì‹œ (í‹€ë¦° ê²½ìš°ì—ë§Œ)
            if (!feedback.isCorrect && retryCount < 2) {
                retryBtn.style.display = 'inline-block';
            } else {
                retryBtn.style.display = 'none';
            }
            
            modal.classList.add('active');
            
            // ìºë¦­í„° ì• ë‹ˆë©”ì´ì…˜
            const characterImg = document.querySelector('.character-img');
            if (feedback.isCorrect) {
                characterImg.className = 'character-img happy';
                characterImg.textContent = 'ğŸ˜Š';
            } else {
                characterImg.className = 'character-img sad';
                characterImg.textContent = 'ğŸ˜Ÿ';
            }
            
            setTimeout(() => {
                characterImg.className = 'character-img';
                characterImg.textContent = 'ğŸ‘¨â€ğŸ“';
            }, 2000);
        }

        function closeModal() {
            document.getElementById('feedbackModal').classList.remove('active');
            retryCount = 0;
            
            // ë‹¤ìŒ í™”ë©´ìœ¼ë¡œ ì´ë™
            if (currentSituation === 1) {
                showScreen('situation2');
            } else if (currentSituation === 2) {
                showScreen('situation3');
            } else if (currentSituation === 3) {
                showScreen('major_situation');
            } else if (currentSituation === 'major') {
                showScreen('situation4');
            } else if (currentSituation === 4) {
                showScreen('situation5');
            } else if (currentSituation === 5) {
                showScreen('result');
                showResults();
            }
        }

        function retryChoice() {
            retryCount++;
            document.getElementById('feedbackModal').classList.remove('active');
            
            // ë§ˆì§€ë§‰ ì„ íƒ ì œê±°
            userChoices.pop();
            
            // í˜„ì¬ í™”ë©´ ìœ ì§€ (ì„ íƒì„ ë‹¤ì‹œ í•  ìˆ˜ ìˆë„ë¡)
        }

        function showResults() {
            const summaryContainer = document.getElementById('choice_summary');
            summaryContainer.innerHTML = '';
            
            const situations = [
                { id: 1, title: 'ë²„ìŠ¤ ì •ë¥˜ì¥', choices: { 'help': 'ì ê·¹ì ìœ¼ë¡œ ë„ì›€ ì œê³µ', 'wait': 'ê¸°ë‹¤ë ¤ì£¼ê¸°', 'ask': 'ì •ì¤‘í•˜ê²Œ ë¨¼ì € ë¬¼ì–´ë³´ê¸°' }},
                { id: 2, title: 'ê°•ì˜ì‹¤', choices: { 'whisper': 'ë‚´ìš© ì„¤ëª…í•´ì£¼ê¸°', 'note': 'í•„ê¸° ê³µìœ í•˜ê¸°', 'professor': 'êµìˆ˜ë‹˜ê»˜ ìš”ì²­í•˜ê¸°' }},
                { id: 3, title: 'í•™ìƒì‹ë‹¹', choices: { 'help_order': 'ì§ì ‘ ì£¼ë¬¸ ë„ì›€', 'explain_menu': 'ë©”ë‰´ ì„¤ëª…í•˜ê¸°', 'staff': 'ì§ì›ì—ê²Œ ë„ì›€ ìš”ì²­' }},
                { id: 4, title: 'ì¡°ë³„ê³¼ì œ', choices: { 'explain': 'ìŠ¬ë¼ì´ë“œ ì„¤ëª…', 'text': 'í…ìŠ¤íŠ¸ ë²„ì „ ì‘ì„±', 'role': 'ì—­í•  ì¬ë¶„ë°° ì œì•ˆ' }},
                { id: 5, title: 'ì—˜ë¦¬ë² ì´í„°', choices: { 'guide': 'ìƒí™© ì•ˆë‚´í•˜ê¸°', 'arm': 'íŒ” ì¡ê³  ì•ˆë‚´', 'together': 'í•¨ê»˜ ì´ë™í•˜ê¸°' }}
            ];
            
            const majorChoices = {
                'ìì—°ëŒ€': { 'describe': 'ê´€ì°° ê²°ê³¼ ë¬˜ì‚¬', 'write': 'í•¨ê»˜ ì •ë¦¬í•˜ê¸°', 'photo': 'ì´ë¯¸ì§€ë¡œ ê¸°ë¡' },
                'ê³µëŒ€': { 'explain': 'êµ¬ì¡° ì„¤ëª…í•˜ê¸°', 'collaborate': 'í•¨ê»˜ ì„¤ê³„í•˜ê¸°', 'dimensions': 'ì¹˜ìˆ˜ ë¶ˆëŸ¬ì£¼ê¸°' },
                'ê²½ì˜ëŒ€': { 'data': 'ë°ì´í„° í‘œ ì •ë¦¬', 'script': 'ë°œí‘œ ëŒ€ë³¸ ì‘ì„±', 'summary': 'íŠ¸ë Œë“œ ìš”ì•½' },
                'ì‚¬ë²”ëŒ€': { 'brainstorm': 'ì•„ì´ë””ì–´ ë…¼ì˜', 'accessible': 'ì ‘ê·¼ì„± ìë£Œ ì°¾ê¸°', 'activity': 'ì²´í—˜ í™œë™ ì œì•ˆ' },
                'ë””ìì¸': { 'describe': 'ì‹œê° ìš”ì†Œ ì„¤ëª…', 'concept': 'ì»¨ì…‰ ì¤‘ì‹¬ í”¼ë“œë°±', 'request': 'ì„¤ëª…ì  í”¼ë“œë°± ìš”ì²­' },
                'ì¸ë¬¸ëŒ€': { 'describe': 'ì‚½í™” ë‚´ìš© ì„¤ëª…', 'text_focus': 'í…ìŠ¤íŠ¸ ì¤‘ì‹¬ ë¶„ì„', 'clarify': 'ì„¤ëª… ë³´ì¶© ìš”ì²­' }
            };
            
            userChoices.forEach((userChoice, index) => {
                const card = document.createElement('div');
                card.className = 'summary-card';
                
                let choiceText = '';
                if (userChoice.situation === 'major') {
                    choiceText = majorChoices[userMajor][userChoice.choice];
                    card.innerHTML = `
                        <div class="summary-title">${userMajor} ìƒí™©</div>
                        <div>ì„ íƒ: ${choiceText}</div>
                    `;
                } else {
                    const situation = situations.find(s => s.id === userChoice.situation);
                    choiceText = situation.choices[userChoice.choice];
                    card.innerHTML = `
                        <div class="summary-title">${situation.title}</div>
                        <div>ì„ íƒ: ${choiceText}</div>
                    `;
                }
                
                summaryContainer.appendChild(card);
            });
            
            // ì„ íƒ íŒ¨í„´ ë¶„ì„ ë° ê²°ê³¼ ì¹´ë“œ ì—…ë°ì´íŠ¸
            const analysis = analyzeChoices();
            updateResultCard(analysis);
        }
        
        function analyzeChoices() {
            const choiceValues = userChoices.map(c => c.choice);
            
            // ì ê·¹ì  ë„ì›€ íŒ¨í„´
            const activeHelp = ['help', 'whisper', 'help_order', 'explain', 'guide'].filter(choice => 
                choiceValues.includes(choice)).length;
            
            // ì†Œí†µ ì¤‘ì‹¬ íŒ¨í„´  
            const communicative = ['ask', 'note', 'explain_menu', 'text', 'together'].filter(choice => 
                choiceValues.includes(choice)).length;
            
            // ì‹œìŠ¤í…œ ê°œì„  íŒ¨í„´
            const systematic = ['professor', 'staff', 'role', 'request'].filter(choice => 
                choiceValues.includes(choice)).length;
            
            if (activeHelp >= 3) {
                return {
                    type: "ğŸ¤ ì ê·¹ì  ë„ìš°ë¯¸",
                    description: "ì–´ë ¤ìš´ ìƒí™©ì„ ë³´ë©´ ë°”ë¡œ ë‚˜ì„œì„œ ë„ì›€ì„ ì£¼ë ¤ê³  í•˜ëŠ” ë”°ëœ»í•œ ë§ˆìŒì„ ê°€ì§€ê³  ìˆì–´ìš”. ë•Œë¡œëŠ” ë¨¼ì € ë¬¼ì–´ë³´ëŠ” ê²ƒë„ ì¢‹ë‹µë‹ˆë‹¤!",
                    emoji: "ğŸ¤"
                };
            } else if (communicative >= 3) {
                return {
                    type: "ğŸ’¬ ì†Œí†µí˜• ë™ë°˜ì",
                    description: "ìƒëŒ€ë°©ì˜ ì˜ê²¬ì„ ë¨¼ì € ë¬»ê³  í•¨ê»˜ í•´ê²°ì±…ì„ ì°¾ìœ¼ë ¤ëŠ” ë°°ë ¤ì‹¬ì´ ê¹Šì–´ìš”. ìµœê³ ì˜ ë„ì›€ ë°©ì‹ì´ì—ìš”!",
                    emoji: "ğŸ’¬"
                };
            } else if (systematic >= 2) {
                return {
                    type: "ğŸ”§ ì‹œìŠ¤í…œ ê°œì„ ì",
                    description: "ê·¼ë³¸ì ì¸ ë¬¸ì œ í•´ê²°ì„ í†µí•´ ë” ë‚˜ì€ í™˜ê²½ì„ ë§Œë“¤ë ¤ëŠ” ìƒê°ì´ ê¹Šì–´ìš”. ì¥ê¸°ì  ê´€ì ì˜ ë„ì›€ì„ ì£¼ëŠ” ë¶„ì´ì—ìš”!",
                    emoji: "ğŸ”§"
                };
            } else {
                return {
                    type: "âš–ï¸ ê· í˜•ì¡íŒ í˜‘ë ¥ì",
                    description: "ìƒí™©ì— ë§ëŠ” ìµœì ì˜ ë„ì›€ ë°©ë²•ì„ ì°¾ìœ¼ë ¤ê³  ë…¸ë ¥í•˜ëŠ” ì§€í˜œë¡œìš´ ë¶„ì´ì—ìš”. ë‹¤ì–‘í•œ ìƒí™©ì— ìœ ì—°í•˜ê²Œ ëŒ€ì‘í•  ìˆ˜ ìˆì–´ìš”!",
                    emoji: "âš–ï¸"
                };
            }
        }

        function updateResultCard(analysis) {
            document.getElementById('resultType').textContent = analysis.type;
            document.getElementById('resultDescription').textContent = analysis.description;
        }

        function shareToTwitter() {
            const analysis = analyzeChoices();
            const shareText = encodeURIComponent(
                `ğŸŒŸ ë§¤ì‹­ì´ì˜ í•˜ë£¨ ì²´í—˜ ì™„ë£Œ!\n\në‚˜ëŠ” '${analysis.type}'ì˜€ì–´ìš”.\n${analysis.description}\n\në„ˆë„ ì²´í—˜í•´ë´! ğŸ‘‡\n#ë§¤ì‹­ì´ì˜í•˜ë£¨ #ì¥ì• ì¸ì‹ê°œì„  #ê³µê°ì²´í—˜`
            );
            const url = encodeURIComponent(window.location.href);
            const twitterUrl = `https://twitter.com/intent/tweet?text=${shareText}&url=${url}`;
            window.open(twitterUrl, '_blank');
        }

        function shareToKakao() {
            const analysis = analyzeChoices();
            const shareText = `ğŸŒŸ ë§¤ì‹­ì´ì˜ í•˜ë£¨ ì²´í—˜ ì™„ë£Œ!\n\në‚˜ëŠ” '${analysis.type}'ì˜€ì–´ìš”.\n${analysis.description}\n\në„ˆë„ ì²´í—˜í•´ë´!`;
            
            // ê°„ë‹¨í•œ ì¹´ì¹´ì˜¤í†¡ ê³µìœ  (ì‹¤ì œ êµ¬í˜„ì‹œ Kakao SDK í•„ìš”)
            if (navigator.share) {
                navigator.share({
                    title: 'ë§¤ì‹­ì´ì˜ í•˜ë£¨ - ë‚˜ì˜ ë„ì›€ ìœ í˜•',
                    text: shareText,
                    url: window.location.href,
                });
            } else {
                // í´ë¦½ë³´ë“œ ë³µì‚¬ ëŒ€ì•ˆ
                navigator.clipboard.writeText(shareText + '\n' + window.location.href).then(() => {
                    alert('ì¹´ì¹´ì˜¤í†¡ ê³µìœ  ë©”ì‹œì§€ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                });
            }
        }

        function downloadResultImage() {
            // html2canvas ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤. 
            // ì‹¤ì œ êµ¬í˜„ì‹œì—ëŠ” CDNì—ì„œ ë¡œë“œí•˜ê±°ë‚˜ ë³„ë„ ì„¤ì¹˜ í•„ìš”
            const resultCard = document.getElementById('resultCard');
            const analysis = analyzeChoices();
            
            // ê°„ë‹¨í•œ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ëŒ€ì•ˆ (ì‹¤ì œë¡œëŠ” html2canvas ì‚¬ìš© ê¶Œì¥)
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 400;
            canvas.height = 300;
            
            // ë°°ê²½ ê·¸ë¼ë””ì–¸íŠ¸
            const gradient = ctx.createLinearGradient(0, 0, 400, 300);
            gradient.addColorStop(0, '#667eea');
            gradient.addColorStop(1, '#764ba2');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 400, 300);
            
            // í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼
            ctx.fillStyle = 'white';
            ctx.textAlign = 'center';
            ctx.font = 'bold 24px Arial';
            ctx.fillText('ë§¤ì‹­ì´ì˜ í•˜ë£¨', 200, 50);
            
            ctx.font = 'bold 20px Arial';
            ctx.fillText('ë‚˜ì˜ ë„ì›€ ìœ í˜•', 200, 80);
            
            ctx.font = 'bold 28px Arial';
            ctx.fillText(analysis.type, 200, 130);
            
            // ì„¤ëª… í…ìŠ¤íŠ¸ (ì—¬ëŸ¬ ì¤„)
            ctx.font = '14px Arial';
            const words = analysis.description.split(' ');
            let line = '';
            let y = 170;
            
            for (let n = 0; n < words.length; n++) {
                const testLine = line + words[n] + ' ';
                const metrics = ctx.measureText(testLine);
                const testWidth = metrics.width;
                if (testWidth > 350 && n > 0) {
                    ctx.fillText(line, 200, y);
                    line = words[n] + ' ';
                    y += 20;
                } else {
                    line = testLine;
                }
            }
            ctx.fillText(line, 200, y);
            
            ctx.font = '12px Arial';
            ctx.fillText('#ë§¤ì‹­ì´ì˜í•˜ë£¨ #ì¥ì• ì¸ì‹ê°œì„ ', 200, 250);
            
            // ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
            const link = document.createElement('a');
            link.download = 'maesipi_result.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        function restart() {
            currentScreen = 0;
            userChoices = [];
            userMajor = '';
            currentSituation = null;
            retryCount = 0;
            updateProgress();
            
            // ì‹œì‘ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById('start').classList.add('active');
            
            // ìºë¦­í„° ì´ˆê¸°í™”
            const characterImg = document.querySelector('.character-img');
            characterImg.className = 'character-img';
            characterImg.textContent = 'ğŸ‘¨â€ğŸ“';
            
            window.scrollTo(0, 0);
        }

        // ì´ˆê¸° ì§„í–‰ë¥  ì„¤ì •
        updateProgress();
        
        // í„°ì¹˜ ì œìŠ¤ì²˜ ì§€ì› (ëª¨ë°”ì¼ ìµœì í™”)
        let touchStartX = 0;
        let touchEndX = 0;
        
        document.addEventListener('touchstart', function(event) {
            touchStartX = event.changedTouches[0].screenX;
        });
        
        document.addEventListener('touchend', function(event) {
            touchEndX = event.changedTouches[0].screenX;
            handleSwipe();
        });
        
        function handleSwipe() {
            const swipeThreshold = 100;
            const diff = touchStartX - touchEndX;
            
            // ì¢Œìš° ìŠ¤ì™€ì´í”„ë¡œ í™”ë©´ ì „í™˜ (ì„ íƒì  ê¸°ëŠ¥)
            if (Math.abs(diff) > swipeThreshold) {
                // ìŠ¤ì™€ì´í”„ ë™ì‘ì´ í•„ìš”í•œ ê²½ìš° ì—¬ê¸°ì— êµ¬í˜„
            }
        }
        
        // ì ‘ê·¼ì„± í–¥ìƒì„ ìœ„í•œ í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Enter' || event.key === ' ') {
                const focusedElement = document.activeElement;
                if (focusedElement.classList.contains('choice-btn') || 
                    focusedElement.classList.contains('major-btn') ||
                    focusedElement.classList.contains('btn-primary') ||
                    focusedElement.classList.contains('btn-secondary') ||
                    focusedElement.classList.contains('modal-btn')) {
                    focusedElement.click();
                    event.preventDefault();
                }
            }
            
            // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
            if (event.key === 'Escape') {
                const modal = document.getElementById('feedbackModal');
                if (modal.classList.contains('active')) {
                    closeModal();
                }
            }
        });
        
        // í™”ë©´ ë¦¬ë”ê¸°ë¥¼ ìœ„í•œ ë™ì  ë‚´ìš© ì—…ë°ì´íŠ¸ ì•ˆë‚´
        function announceScreenChange(screenName) {
            const announcement = document.createElement('div');
            announcement.setAttribute('aria-live', 'polite');
            announcement.setAttribute('aria-atomic', 'true');
            announcement.className = 'sr-only';
            announcement.textContent = `${screenName} í™”ë©´ìœ¼ë¡œ ì´ë™í–ˆìŠµë‹ˆë‹¤.`;
            document.body.appendChild(announcement);
            
            setTimeout(() => {
                document.body.removeChild(announcement);
            }, 1000);
        }
        
        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ì‹œ ë‹«ê¸°
        document.getElementById('feedbackModal').addEventListener('click', function(event) {
            if (event.target === this) {
                closeModal();
            }
        });
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ í¬ì»¤ìŠ¤ ì„¤ì • (ì ‘ê·¼ì„±)
        window.addEventListener('load', function() {
            const firstButton = document.querySelector('.major-btn');
            if (firstButton) {
                firstButton.focus();
            }
        });
        
        // ì§„ë™ í”¼ë“œë°± (ëª¨ë°”ì¼)
        function vibrateFeedback(type) {
            if ('vibrate' in navigator) {
                if (type === 'correct') {
                    navigator.vibrate([100, 50, 100]); // ì„±ê³µ íŒ¨í„´
                } else {
                    navigator.vibrate([200, 100, 200, 100, 200]); // ì˜¤ë‹µ íŒ¨í„´
                }
            }
        }
        
        // ì„ íƒ ì‹œ ì§„ë™ í”¼ë“œë°± ì¶”ê°€
        function makeChoiceWithFeedback(situation, choice) {
            let feedback;
            
            if (situation === 'major') {
                const majorSituation = majorSituations[userMajor];
                feedback = majorSituation.choices.find(c => c.value === choice);
            } else {
                feedback = feedbackMap[situation][choice];
            }
            
            // ì§„ë™ í”¼ë“œë°±
            vibrateFeedback(feedback.isCorrect ? 'correct' : 'incorrect');
            
            // ê¸°ì¡´ makeChoice í•¨ìˆ˜ í˜¸ì¶œ
            makeChoice(situation, choice);
        }
        
        // ARIA ë ˆì´ë¸” ë™ì  ì—…ë°ì´íŠ¸
        function updateAriaLabels() {
            const progressBar = document.getElementById('progressBar');
            const progress = Math.round((currentScreen / totalScreens) * 100);
            progressBar.setAttribute('aria-label', `ì§„í–‰ë¥  ${progress}%`);
            progressBar.setAttribute('role', 'progressbar');
            progressBar.setAttribute('aria-valuenow', progress);
            progressBar.setAttribute('aria-valuemin', '0');
            progressBar.setAttribute('aria-valuemax', '100');
        }
        
        // í™”ë©´ ì „í™˜ì‹œ ARIA ì—…ë°ì´íŠ¸
        const originalShowScreen = showScreen;
        showScreen = function(screenId) {
            originalShowScreen(screenId);
            updateAriaLabels();
            
            // ìŠ¤í¬ë¦° ë¦¬ë”ë¥¼ ìœ„í•œ ì œëª© ì•ˆë‚´
            const screenTitles = {
                'start': 'ì‹œì‘ í™”ë©´',
                'situation1': 'ì²« ë²ˆì§¸ ìƒí™©: ë²„ìŠ¤ ì •ë¥˜ì¥',
                'situation2': 'ë‘ ë²ˆì§¸ ìƒí™©: ê°•ì˜ì‹¤',
                'situation3': 'ì„¸ ë²ˆì§¸ ìƒí™©: í•™ìƒì‹ë‹¹',
                'major_situation': `ë„¤ ë²ˆì§¸ ìƒí™©: ${userMajor}`,
                'situation4': 'ë‹¤ì„¯ ë²ˆì§¸ ìƒí™©: ì¡°ë³„ê³¼ì œ',
                'situation5': 'ì—¬ì„¯ ë²ˆì§¸ ìƒí™©: ì—˜ë¦¬ë² ì´í„°',
                'result': 'ê²°ê³¼ í™”ë©´'
            };
            
            if (screenTitles[screenId]) {
                announceScreenChange(screenTitles[screenId]);
            }
        };
        
        // ì´ˆê¸° ARIA ì„¤ì •
        updateAriaLabels();
    </script>
</body>
</html>